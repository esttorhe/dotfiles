# ABOUTME: 1Password secrets and SSH agent configuration
# ABOUTME: Sourced automatically by fish from conf.d/

# 1Password SSH Agent
{{ if eq .chezmoi.os "darwin" -}}
set -gx SSH_AUTH_SOCK "$HOME/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
{{ else if eq .chezmoi.os "linux" -}}
set -gx SSH_AUTH_SOCK "$HOME/.1password/agent.sock"
{{- end }}

# Cloudflare Zero Trust headers (for Infisical and other internal tools)
set -gx INFISICAL_CUSTOM_HEADERS "CF-Access-Client-Id={{ onepasswordRead "op://Private/CF-Access-Client-Id/password" }} CF-Access-Client-Secret={{ onepasswordRead "op://Private/CF-Access-Client-Secret/password" }}"

# OpenWeather API key
set -gx OPEN_WEATHER_API_KEY "{{ onepasswordRead "op://Private/OPENWEATHER_API/password" }}"
